<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>JSDoc: Source: VizbeeCastBarWrapper.js</title>

    <script src="scripts/prettify/prettify.js"> </script>
    <script src="scripts/prettify/lang-css.js"> </script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="styles/prettify-tomorrow.css">
    <link type="text/css" rel="stylesheet" href="styles/jsdoc-default.css">
</head>

<body>

<div id="main">

    <h1 class="page-title">Source: VizbeeCastBarWrapper.js</h1>

    



    
    <section>
        <article>
            <pre class="prettyprint source linenums"><code>/**
 * @module VizbeeCastBarWrapper
 * @description A wrapper component for the Vizbee Cast Bar View, managing height and visibility.
 */

import React, { useState, useRef, useEffect } from "react";
import {
  requireNativeComponent,
  Platform,
  View,
  Dimensions,
  PixelRatio,
  findNodeHandle,
  UIManager,
} from "react-native";
import PropTypes from "prop-types";

// Require the native component
const VizbeeCastBar = requireNativeComponent("VizbeeCastBarView");

/**
 * VizbeeCastBarWrapper component
 * @param {Object} props - Component props
 * @param {number} [props.height=64] - The height of the cast bar view
 * @param {function} props.onVisibilityChange - Callback function triggered when the visibility of the cast bar changes
 * @returns {JSX.Element|null} React element representing the Vizbee Cast Bar Wrapper or null if not on iOS
 */
const VizbeeCastBarWrapper = ({ height = 64, onVisibilityChange }) => {
  const [viewHeight, setViewHeight] = useState(0);
  const ref = useRef(null);
  const [screenWidth, setScreenWidth] = useState(
    Dimensions.get("window").width
  );

  useEffect(() => {
    const handleOrientationChange = () => {
      const { width } = Dimensions.get("window");
      setScreenWidth(width);
    };

    const dimensionsSubscription = Dimensions.addEventListener(
      "change",
      handleOrientationChange
    );

    // Clean up the event listener on component unmount
    return () => {
      dimensionsSubscription?.remove();
    };
  }, []);

  useEffect(() => {
    // Create fragment for Android platform
    if (Platform.OS === "android") {
      const viewId = findNodeHandle(ref.current);
      createFragment(viewId);
    }
  }, []);

  // Function to create fragment for Android platform
  const createFragment = (viewId) =>
    UIManager.dispatchViewManagerCommand(
      viewId,
      UIManager.getViewManagerConfig(
        "VizbeeCastBarView"
      ).Commands.create.toString(),
      [viewId]
    );

  /**
   * Event handler for visibility change
   * @param {Object} event - The event object
   */
  const onChange = (event) => {
    setViewHeight(event.nativeEvent.shouldAppear ? height : 0);
    onVisibilityChange &amp;&amp; onVisibilityChange(event.nativeEvent.shouldAppear);
  };

  return (
    &lt;View
      style={{
        height: viewHeight,
        width: screenWidth,
        overflow: "hidden",
      }}
    >
      {/* Render the VizbeeMiniCastBar component */}
      {Platform.OS === "ios" ? (
        &lt;VizbeeCastBar
          height={viewHeight}
          onVisibilityChange={onChange}
          ref={ref}
        />
      ) : Platform.OS === "android" ? (
        &lt;VizbeeCastBar
          style={{
            height: PixelRatio.getPixelSizeForLayoutSize(height), // Converts dpi to px, provide desired height
            width: PixelRatio.getPixelSizeForLayoutSize(screenWidth), // Converts dpi to px, provide desired width
          }}
          ref={ref}
          onVisibilityChange={onChange}
        />
      ) : (
        &lt;>&lt;/>
      )}
    &lt;/View>
  );
};

// Prop types validation
VizbeeCastBarWrapper.propTypes = {
  height: PropTypes.number,
  onVisibilityChange: PropTypes.func,
};

export default VizbeeCastBarWrapper;</code></pre>
        </article>
    </section>




</div>

<nav>
    <h2><a href="index.html">Home</a></h2><h3>Modules</h3><ul><li><a href="module-VizbeeCastBarWrapper.html">VizbeeCastBarWrapper</a></li></ul><h3>Classes</h3><ul><li><a href="VizbeeManager.html">VizbeeManager</a></li><li><a href="VizbeeSignInDelegate.html">VizbeeSignInDelegate</a></li><li><a href="VizbeeSignInInfo.html">VizbeeSignInInfo</a></li><li><a href="VizbeeSmartPromptOptions.html">VizbeeSmartPromptOptions</a></li><li><a href="VizbeeTrackInfo.html">VizbeeTrackInfo</a></li><li><a href="VizbeeTrackStatus.html">VizbeeTrackStatus</a></li><li><a href="VizbeeVideo.html">VizbeeVideo</a></li><li><a href="VizbeeVideoStatus.html">VizbeeVideoStatus</a></li><li><a href="module.exports_module.exports.html">exports</a></li></ul><h3>Global</h3><ul><li><a href="global.html#VizbeePlayerState">VizbeePlayerState</a></li><li><a href="global.html#VizbeeSmartPromptSubflow">VizbeeSmartPromptSubflow</a></li><li><a href="global.html#addAnalyticsAttributes">addAnalyticsAttributes</a></li><li><a href="global.html#addListener">addListener</a></li><li><a href="global.html#disconnect">disconnect</a></li><li><a href="global.html#fromJson">fromJson</a></li><li><a href="global.html#getSessionConnectedDevice">getSessionConnectedDevice</a></li><li><a href="global.html#getSessionState">getSessionState</a></li><li><a href="global.html#getSignInDelegate">getSignInDelegate</a></li><li><a href="global.html#getSignInInfo">getSignInInfo</a></li><li><a href="global.html#getSignInInfoAsync">getSignInInfoAsync</a></li><li><a href="global.html#getVolume">getVolume</a></li><li><a href="global.html#hasState">hasState</a></li><li><a href="global.html#mute">mute</a></li><li><a href="global.html#pause">pause</a></li><li><a href="global.html#play">play</a></li><li><a href="global.html#removeAllListeners">removeAllListeners</a></li><li><a href="global.html#removeListener">removeListener</a></li><li><a href="global.html#removeSignInDelegate">removeSignInDelegate</a></li><li><a href="global.html#resetActiveTrack">resetActiveTrack</a></li><li><a href="global.html#seek">seek</a></li><li><a href="global.html#setActiveTrack">setActiveTrack</a></li><li><a href="global.html#setSignInDelegate">setSignInDelegate</a></li><li><a href="global.html#setVolume">setVolume</a></li><li><a href="global.html#smartCast">smartCast</a></li><li><a href="global.html#smartPlay">smartPlay</a></li><li><a href="global.html#smartPrompt">smartPrompt</a></li><li><a href="global.html#smartPromptWithOptions">smartPromptWithOptions</a></li><li><a href="global.html#stop">stop</a></li><li><a href="global.html#supportsVolumeControl">supportsVolumeControl</a></li><li><a href="global.html#unmute">unmute</a></li></ul>
</nav>

<br class="clear">

<footer>
    Documentation generated by <a href="https://github.com/jsdoc/jsdoc">JSDoc 4.0.3</a> on Mon Sep 30 2024 19:50:50 GMT+0530 (India Standard Time)
</footer>

<script> prettyPrint(); </script>
<script src="scripts/linenumber.js"> </script>
</body>
</html>
